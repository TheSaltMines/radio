<?php
  include("../configuration.php");
  include("../classes/Db.class.php");
  include("../classes/Track.class.php");
  include("../classes/Collection.class.php");
  include("../classes/Queue.class.php");
  include("../include/functions.php");
  
  $c = new Config();
  $db = new Db();
  $cx = new Collection();
  session_start();  
  
  authenticate();  
?>
<html>
  <head>
    <style>
      .incollection { color: #0F0; }
      .new { color: #F00; }
    </style>
  </head>
  <body>
<?php
  
  $allTracks = rdioGet(array("method"=>"get", "keys"=>"t2836508,t2863829,t135662,t2847231,t4371641,t4834567,t4834676,t1220337,t3606394,t2771562,t1241403,t7350156,t2916159,t7384178,t8010222,t2226778,t7562561,t2867645,t2848152,t7665623,t2898594,t5778185,t4246757,t2066035,t3159926,t5474075,t1829112,t2254063,t2065724,t2062937,t1285930,t3948011,t4451958,t2996650,t2910534,t1170037,t1199877,t2470819,t3602695,t1155179,t3643260,t3341686,t2030369,t2867566,t7355026,t2566495,t2888781,t4905031,t3640660,t2566615,t5153312,t7321333,t3527755,t3149264,t1145871,t6742365,t1184485,t2885327,t2831156,t2885619,t2012882,t3369511,t6881399,t1153584,t3330088,t3497309,t2885500,t2735787,t3764054,t3493794,t2277600,t7348416,t2930762,t2477725,t2802495,t2787141,t2022180,t7325000,t1009695,t3973556,t5781882,t3527623,t2226169,t6620072,t2101839,t4280666,t1183108,t1684939,t2544113,t3338324,t2999371,t2496703,t3290799,t2839799,t7350437,t4627886,t2057267,t4063752,t1155281,t2270803,t3636829,t2844857,t4065729,t5153232,t2831160,t6832027,t2802200,t3120779,t3764962,t2066152,t2865572,t3527753,t2901124,t3063358,t3543546,t2983953,t3514370,t7344428,t7366391,t7321945,t1281477,t1151909,t4063915,t2252266,t1196233,t7350229,t2230362,t2539417,t4161085,t6946513,t7366407,t2428422,t1734201,t3947874,t4323912,t3378194,t1190093,t7385584,t7833246,t7327171,t2668731,t7369089,t5035747,t2960701,t7803816,t1168649,t2062983,t2062783,t4905057,t3026514,t2274024,t2787441,t3024423,t2931023,t2910481,t1242478,t2283923,t2366108,t2327870,t1876729,t4064209,t1241859,t7348777,t1291601,t2822946,t2710439,t6844518,t2097532,t2208348,t7522531,t2991866,t1274174,t1511778,t2208401,t5679136,t2083022,t2836887,t2912013,t6957164,t2845109,t6112315,t2273241,t697733,t7357352,t1876711,t4024129,t7803798,t2225051,t5153273,t7746887,t1236779,t3077326,t3637848,t1847620,t4067890,t1146382,t2541769,t3617269,t4209058,t5679052,t5468180,t1883001,t6946888,t7348772,t1814507,t7247446,t6947137,t2784213,t4586972,t2490252,t2211350,t3370830,t1288677,t3019446,t2703020,t2278119,t7350763,t2684389,t7327093,t1010039,t1783680,t2826960,t6387126,t54050,t5867269,t3994822,t2235206,t2886135,t2457827,t2782847,t4555283,t999272,t2981312,t7343389,t2926715,t7369061,t2887701,t3026866,t3123366,t1221333,t2541613,t7116243,t3073795,t771155,t3054108,t3585043,t7452857,t2192681,t4558287,t2802025,t7326267,t1684570,t2842100,t1782918,t2951261,t3078486,t3089967,t3643658,t2866113,t2857255,t1221585,t1271747,t7325329,t3511357,t2232736,t1246046,t1248196,t2787336,t1741059,t3048891,t1165061,t2278814,t8013075,t2903673,t5515564,t3370783,t1685321,t2383185,t1246833,t2991878,t2086357,t2952891,t5470148,t2391541,t4159820,t3290832,t7450148,t2850717,t2184850,t2353666,t2457023,t1279747,t8013054,t2844668,t2787307,t1254348,t1522688,t3291334,t3291231,t2888562,t2894244,t2930526,t1522709,t697776,t4104796,t3026252,t2567674,t2844452,t2787116,t3291165,t3822174,t2320454,t2063280,t4063896,t2931465,t2185637,t2351955,t3291388,t2392523,t2270586,t5335475,t2233019,t2229656,t2836966,t2953921,t2079774,t2894573,t6855821,t2101701,t1814528,t1867787,t1190807,t1253977,t1254048,t4003149,t2391209,t4483139,t5354175,t3643654,t2208367,t2703336,t2829898,t7321829,t7324821,t5890203,t2065741,t2823269,t4371775,t5797057,t2755808,t5890243,t5890222,t2911935,t5887984,t2927120,t2755561,t6669085,t5679142,t2755490,t7350147,t3377171,t4483164,t7349651,,t2101123,t3784805,t2843949,t1154973,t7800786,t2940723"));
  foreach ($allTracks->result as $key=>$val) {
    if ($val->canStream!=1) {
      print "Removing track ".$key.": ".$val->name." : ".$val->artist."<br />";
      $db->query("DELETE FROM queue WHERE trackKey='$key'");
    }
  }
?>
</body>
</html>